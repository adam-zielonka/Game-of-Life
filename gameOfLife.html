<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js"></script>
    <title>Gra w życie</title>
    <style>
    #canvas {
        border: 2px solid red;
    }
    </style>
    <script>
    function game(board){
      var result = board.map(item => item.slice())
      var n = board.length
      for(var i=0; i<n; i++) {
        var m = board[i].length
        for(var j=0, count=0; j<m; j++, count=0) {
          if(i-1>=0 && j-1>=0 && board[i-1][j-1]) count++
          if(i-1>=0 &&           board[i-1][j]) count++
          if(i-1>=0 && j+1<m  && board[i-1][j+1]) count++
          if(j+1<m  &&           board[i][j+1]) count++
          if(j-1>=0 &&           board[i][j-1]) count++
          if(i+1<n  && j+1<m  && board[i+1][j+1]) count++
          if(i+1<n  && j-1>=0 && board[i+1][j-1]) count++
          if(i+1<n  &&           board[i+1][j]) count++
          if(board[i][j]) {
            if(count < 2 || count > 3) result[i][j] = false
          } else {
            if(count == 3) result[i][j] = true
          }
        }
      }
      return result
    }

    function print(ctx, board, size){
      for (var i = 0; i < board.length; i++)
        for (var j = 0; j < board[i].length; j++) {
          ctx.fillStyle = board[i][j] ? `black` : `white`
          ctx.fillRect(j*size, i*size, size, size)
        }
    }

    function setSize(newSize) {
      size = newSize > 0 ? newSize : 1
      ctx.canvas.width = board[0].length * size
      ctx.canvas.height = board.length * size
      print(ctx, board, size)
    }

    function getRandom(min, max) {
      return Math.floor(Math.random() * (max - min)) + min;
    }

    function generateBoard(boardSize) {
      var board = []
      for (var i = 0; i < boardSize; i++) {
        board[i] = []
        for (var j = 0; j < boardSize; j++)
          board[i][j] = getRandom(0, 2) == 1
      }
      return board
    }

    function gameOfLife() {
      board = game(board)
      print(ctx,board,size);
      setTimeout(gameOfLife, time)
    }
    </script>
  </head>
  <body>
    <div class="container">
      <h1 class="d-flex justify-content-center">Gra w życie</h1>
      <div class="d-flex justify-content-center">
        <canvas width="500" height="500" id="canvas">
            ...treść alternatywna...
        </canvas>
      </div>
      <div class="d-flex justify-content-center">
        <div class="btn-group" role="group" aria-label="Size">
          <button type="button" class="btn btn-secondary btn-success" onclick="setSize(++size)">+</button>
          <button type="button" class="btn btn-secondary btn-danger" onclick="setSize(--size)">-</button>
        </div>
      </div>
    </div>
    <script>
      const canvasElem = document.getElementById('canvas');
      const ctx = canvasElem.getContext('2d');
      var size = 10, time = 100, boardSize = 50
      var board = generateBoard(boardSize)
      setSize(size)
      gameOfLife()
    </script>
  </body>
</html>
